{% extends "base.html" %}

{% block title %}Главная — Design.pro{% endblock %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<main class="home-content">


        <h1>Добро пожаловать в Design.pro</h1>
        <p>Дизайн, который вы чувствуете — а не просто видите.</p>



    <section class="section about">
        <h2>Кто мы</h2>
        <p>
            Design.pro — небольшая, но очень увлечённая студия интерьерного дизайна. Мы создаём пространства,
            в которых хочется оставаться: уютные квартиры, вдохновляющие офисы, гостеприимные кафе.
        </p>
        <p>
            Никаких шаблонов. Только индивидуальный подход, честная коммуникация и проекты, которые работают
            на вас — а не наоборот.
        </p>
    </section>

    <section class="section services">
        <h2>Наши услуги</h2>
        <div class="services-grid">
            <div class="service-card">
                <h3>Дизайн-проект</h3>
                <ul>
                    <li>Эскизы и планировочные решения</li>
                    <li>3D-визуализации в фотореалистичном стиле</li>
                    <li>Спецификации материалов и мебели</li>
                </ul>
            </div>
            <div class="service-card">
                <h3>Сопровождение</h3>
                <ul>
                    <li>Подбор поставщиков и подрядчиков</li>
                    <li>Авторский надзор на всех этапах</li>
                    <li>Консультации «по горячим следам»</li>
                </ul>
            </div>
        </div>
    </section>


    <section class="section portfolio">
        <h2>Наши работы</h2>

        {% if completed_requests %}
            <div class="portfolio-grid">
                {% for req in completed_requests %}
                    <article class="portfolio-item">
                        <div class="portfolio-image">
                            {% if req.design_image %}
                                <img src="{{ req.design_image.url }}"
                                     alt="Проект: {{ req.title }}"
                                     loading="lazy">
                            {% else %}
                                <div class="placeholder">Нет изображения</div>
                            {% endif %}
                        </div>
                        <div class="portfolio-info">
                            <h3>{{ req.title }}</h3>
                            <p class="category">✦ {{ req.category.name }}</p>
                            <p class="date">{{ req.created_at|date:"d E Y" }}</p>
                            <p class="description">{{ req.description|truncatewords:15 }}</p>
                        </div>
                    </article>
                {% endfor %}
            </div>
        {% else %}
            <p class="empty-state">Пока нет завершённых проектов — но первые уже в финальной стадии!</p>
        {% endif %}
    </section>


    <section class="section stats">
        <p>Активных проектов: <strong>{{ in_progress_count }}</strong></p>
    </section>


    <section class="section cta">
        {% if user.is_authenticated %}
            {% if user.is_staff %}
                <h3>Для администраторов</h3>
                <nav class="links">
                    <a href="{% url 'admin_dashboard' %}">Админ-панель</a>
                    <a href="{% url 'manage_categories' %}">Управление категориями</a>
                </nav>
            {% else %}
                <h3>Для клиентов</h3>
                <nav class="links">
                    <a href="{% url 'user_dashboard' %}">Мои проекты</a>
                    <a href="{% url 'create_request' %}" class="btn">Начать новый проект</a>
                </nav>
            {% endif %}
        {% else %}
            <h3>Хотите свой проект?</h3>
            <p>Войдите или зарегистрируйтесь — это займёт меньше минуты.</p>
            <nav class="links">
                <a href="{% url 'login' %}">Войти</a>
                <a href="{% url 'register' %}" class="btn">Регистрация</a>
            </nav>
        {% endif %}
    </section>
</main>
{% endblock %}