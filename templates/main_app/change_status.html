{% extends "base.html" %}

{% block title %}–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ #{{ request_obj.id }} ‚Äî Design.pro{% endblock %}

{% block content %}
<div class="container admin-form">
    <div class="page-header">
        <h1> –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞</h1>
        <p class="subtitle">
            –ó–∞—è–≤–∫–∞ #{{ request_obj.id }} ¬∑ ¬´{{ request_obj.title|truncatechars:40 }}¬ª
        </p>
    </div>


    <div class="card project-preview">
        <h2>–¢–µ–∫—É—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <div class="project-details">
            <div class="detail-row">
                <span class="label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</span>
                <span class="value">{{ request_obj.category.name }}</span>
            </div>
            <div class="detail-row">
                <span class="label">–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:</span>
                <span class="value status-badge status-{{ request_obj.status }}">
                    {{ request_obj.get_status_display }}
                </span>
            </div>
            <div class="detail-row full">
                <span class="label">–û–ø–∏—Å–∞–Ω–∏–µ:</span>
                <p class="value">{{ request_obj.description|truncatechars:150 }}</p>
            </div>
            {% if request_obj.plan_image %}
                <div class="detail-row">
                    <span class="label">–ü–ª–∞–Ω –ø–æ–º–µ—â–µ–Ω–∏—è:</span>
                    <span class="value">
                        <a href="{{ request_obj.plan_image.url }}" target="_blank" class="link">
                             –û—Ç–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                        </a>
                    </span>
                </div>
            {% endif %}
        </div>
    </div>


    <div class="card form-card">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å</h2>
        <p class="form-note">
             –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ü–æ–ª—è –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
        </p>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}


            <div class="form-field">
                <label for="{{ form.status.id_for_label }}" class="field-label">
                    –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
                </label>
                {{ form.status }}
                {% if form.status.errors %}
                    <p class="field-error">{{ form.status.errors }}</p>
                {% endif %}
                <p class="field-hint">
                    <strong>¬´–ü—Ä–∏–Ω—è—Ç–æ –≤ —Ä–∞–±–æ—Ç—É¬ª</strong> ‚Äî —É–∫–∞–∂–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.<br>
                    <strong>¬´–í—ã–ø–æ–ª–Ω–µ–Ω–æ¬ª</strong> ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞.
                </p>
            </div>


            <div class="form-field">
                <label for="{{ form.admin_comment.id_for_label }}" class="field-label">
                    –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
                </label>
                <p class="field-hint">–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä: —Å—Ä–æ–∫–∏, —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏.</p>
                {{ form.admin_comment }}
                {% if form.admin_comment.errors %}
                    <p class="field-error">{{ form.admin_comment.errors }}</p>
                {% endif %}
            </div>


            <div class="form-field">
                <label for="{{ form.design_image.id_for_label }}" class="field-label">
                    –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω
                </label>
                <p class="field-hint">
                    –ó–∞–≥—Ä—É–∑–∏—Ç–µ 3D-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é, —Ñ–æ—Ç–æ—Ä–µ–Ω–¥–µ—Ä –∏–ª–∏ –∫–æ–ª–ª–∞–∂. –§–æ—Ä–º–∞—Ç—ã: JPG, PNG. –î–æ 2 –ú–ë.
                </p>
                {{ form.design_image }}
                {% if form.design_image.errors %}
                    <p class="field-error">{{ form.design_image.errors }}</p>
                {% endif %}

                {% if request_obj.design_image %}
                    <div class="current-preview">
                        <span>–¢–µ–∫—É—â–∏–π –¥–∏–∑–∞–π–Ω:</span>
                        <a href="{{ request_obj.design_image.url }}" target="_blank" class="link">
                             –û—Ç–∫—Ä—ã—Ç—å
                        </a>
                    </div>
                {% endif %}
            </div>
        
            <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg">
                     –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å
                </button>
                <a href="{% url 'admin_dashboard' %}" class="btn btn-outline">‚Üê –û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </div>

    <div class="info-box">
        <p>
            üí° <strong>–°–æ–≤–µ—Ç:</strong> –ü–æ—Å–ª–µ —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ email –∏ —É–≤–∏–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.
        </p>
    </div>
</div>
{% endblock %}